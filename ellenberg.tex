% !TEX root = aws2014.tex

\section{Geometric analytic number theory}
\thanksauthor{Jordan Ellenberg}





\subsection{Analytic number theory}

The first order of business is to clarify what is meant by ``analytic number 
theory.'' We will do this via example. 

\begin{question}
How many pairs of integers in $[1,N]\times [1,N]$ are coprime? 
\end{question}

\begin{question}
If $X$ is a projective variety over $\dQ$, how many points are there in 
$X(\dQ)$ of height at most $N$? 
\end{question}

If $X=\dP_\dQ^1$, then the first question is seen to be a special case of the 
second. 

\begin{question}
How many primes are there $\leq N$?
\end{question}

\begin{question}
How many totally real cubic fields are there with discriminant $\leq N$?
\end{question}

We can combine the previous two questions. 

\begin{question}
How many real totally real cubic fields are there with \emph{prime} discriminant 
$\leq N$?
\end{question}

Some of these questions could also be said to fall under ``arithmetic 
statistics,'' or ``geometric arithmetic statistics.'' 

\begin{question}[Autocorrelation of M\"obius]
Is $\sum_{n\leq N} \mu(n) \mu(n+1) = o(N)$?
\end{question}

This falls under the general framework of the \emph{Chowla conjectures}. 

\begin{question}
What is the probability that a quadratic imaginary field $\dQ(\sqrt{-d})$ 
($d$ chosen randomly in $[N,2 N]$) has class number prime to $7$? 
\end{question}

In this question, there is the implicit conjecture that such a probability is 
well-defined. This falls under the \emph{Cohen-Lenstra heuristics}. 

\begin{question}
If $n$ is a random square-free integer in $[N, 2 N]$, what is the probability 
that there exists a totally real quintic field $K/\dQ$ with discriminant $n$? 
\end{question}

The answer is expected to be $e^{-1/120}$. 

All of these problems fall under ``analytic number theory,'' or ``arithmetic 
statistics.'' The main idea is that they can all be fruitfully attacked using 
the tools of arithmetic geometry (\'etale cohomology, \ldots). The phrase 
``how many'' is meant \emph{asymptotically}. For example, in the first 
question the answer is $6/\pi^2$, but we do \emph{not} mean that 
$\#\{(x,y)\in [1,N]\times [1,N]\text{ coprime}\} = \frac{6}{\pi^2} N^2$. 
Rather, we mean that 
\[
  \lim_{N\to \infty} N^{-2} \# \{(x,y)\in [1,N]\times [1,N]\text{ coprime}\} = \frac{6}{\pi^2} .
\]
Even better, 
\[
  \# \{(x,y)\text{ coprime in }[1,N]\times [1,N]\} = \frac{6}{\pi^2} N^2 + O(N^{2-\delta}) 
\]
for some $\delta>0$. This is called a \emph{power-saving error term}. Making 
$\delta$ as large as possible is a big part of analytic number theory. 

The work ``geometric'' in ``geometric analytic number theory'' should be taken 
as the same word in ``geometric Langlands.'' We will take geometric analogues 
of these problems, and attack these problems geometrically. 





\subsection{Number fields and function fields}

The following definition is standard. 

\begin{definition}
A \emph{global field} is either 
\begin{itemize}
  \item a \emph{number field} (i.e. a finite extension of $\dQ$) 
  \item the function field of a curve over a finite field $\dF_q$ (i.e. a field 
    isomorphic to a finite extension of $\dF_q(t)$)
\end{itemize}
\end{definition}

The reason for this slightly complicated definition is that any number field is 
such in a unique way (i.e. $\dQ$ sits inside fields uniquely). On the other 
hand, function fields contain $\dF_q(t)$ in many different (i.e. non-isomorphic) 
ways. We will be mostly be interested in the function field $\dF_q(t)$. 

There is a long list of analogies between these two types of fields. See the 
table in \cite{p13}. Think of the fields $\dQ$ and $\dF_q(t)$. The ring 
$\dZ\subset \dQ$ can be defined as 
\[
  \{x\in \dQ:|x|_p\leq 1\text{ for all absolute values except }|\cdot |_\infty\} .
\]
Similarly, we can ``pin down'' $\dF_q[t]$ as a subring of $\dF_q(t)$. For each 
$x\in \dF_q(t)$ and for each point $P$ of $\dP^1$, we have an 
absolute value 
\[
  |x|_P = q^{-v_P(x)}
\]
If $P=\infty$, we have $v_\infty(f/g) = \deg g - \deg f$. The analogous 
definition of $\dF_q[t]$ is 
\begin{align*}
  \dF_q[t] &= \{x : |x|_P\leq 1\text{ for all $P$ except $\infty$} \} \\
    &= \{x:x\text{ has no denominator}\} \\
    &= \{x:x\text{ has no poles away from $\infty$}\} \\
    &= \{x:x\text{ is a polynomial $P$ with $|x|_\infty = q^{\deg P}$}\} .
\end{align*}

There is a major difference between $\dQ$ and $\dF_q(t)$. In $\dQ$, there is 
only one archimedean place $\infty$. In $\dF_q(t)$, the valuation $\infty$ is 
\emph{not} special -- we can apply any automorphism of $\dP^1$ to move it 
around, e.g.\ arriving at $\dF_q\left[\frac{1}{1-t}\right]$. 

Over $\dQ$, we think of the ``positive integers'' $\dN$ as a set of 
coset representatives for $\dZ/\dZ^\times$. Over $\dF_q(t)$, we will think of 
``monic polynomials'' as a set of coset representatives for 
$\dF_q[t]/\dF_q[t]^\times$. An interval in $\dZ$ can be thought of as 
$\{n:|n-n_0|\leq d\}$ for some $d$. Similarly, an \emph{interval} in $\dF_q[t]$ 
will be a set of the form $\{f:|f-f_0|\leq e\}$. Recall that 
$|f-f_0| = |f-f_0|_\infty = q^{\deg(f-f_0)}$. For example, 
$\{f:|f-x^n|\leq q^{n-1}\}$ is precisely the set of monic polynomials of degree 
$n$. 





\subsection{Square-free integers and square-free polynomials}

\begin{question}
How many integers in $[N,2 N]$ are squarefree?
\end{question}

One might expect this probability to be 
\[
  \left(1-\frac 1 4\right)\left(1-\frac 1 9\right)\left(1-\frac{1}{25}\right) \cdots 
\]
and indeed this is correct. Namely, if we call 
\[
  \squarefree(N) = \#\{n\in [N, 2 N]:n\text{ is square-free}\} ,
\]
then 
\[
  \lim_{N\to \infty} N^{-1} \squarefree(N) = \prod_p (1-p^{-2}) = \frac{1}{\zeta(2)} .
\]

Over $\dF_q[t]$, we consider the intervals consisting of monic polynomials of 
degree $n$, i.e. polynomials of the form 
$x^n+ a_1 x^{n-1} + \cdots + a_n$. This is an interval of ``size'' (i.e.\ 
cardinality) $q^n$. (So think of $q^n$ as $N$.) Let 
\[
  \squarefree_q(n) = \#\{\text{square-free polynomials in }\dF_q[t]\text{ of degree $n$}\} .
\]
It is known that 
\[
  \lim_{n\to \infty} q^{-n} \squarefree_q(n) = 1 - \frac 1 q .
\]
Contrary to appearances, this is the same as the previous answer. 
Heuristically, one might have expected 
\[
  \lim_{n\to \infty} q^{-n} \squarefree_q(n) = \prod_{P\text{ irreducible}} (1-q^{-2\deg P}) = \prod_P (1-|P|^{-2}) =: \frac{1}{\zeta_{\dF_q[t]}(2)} .
\]
Here, the miracle is that this giant infinite product defining 
$\zeta_{\dF_q[t]}(2)^{-1}$ collapses to the simple rational number 
$1-q^{-1}$. It remains to justify the use of the word ``geometric'' when 
talking about function fields. 

The above follows from this surprising lemma. 

\begin{lemma}
We have $\squarefree_q(n) = q^n(1-\frac 1 q)$ for all $n>1$. 
\end{lemma}
\begin{proof}
Let $\Sigma_{n,e}$ be the number of monic polynomials of degree $n$ of the form 
$a(t) b^2(t)$, where $a$ is squarefree and $\deg(b)=e$. All $q^n$ polynomials 
can be factored (uniquely) in this way, so 
$q^n = \sum_{e=1}^{\lceil n/2\rceil} \# \Sigma_{n,e}$. We have 
$\# \Sigma_{n,e} = q^e \squarefree_q(n-2 e)$. By induction, starting from 
$\squarefree_q(0)=1$ and $\squarefree_q(1)=q$, we get the desired result. 
\end{proof}

In some ways, this is the ``motivic proof'' of our result. We'd like to give a 
more obviously ``geometric'' proof. 

The absence of an error term is misleading. For a general function field 
$\dF_q(C)$, the natural analogue 
$\squarefree_C(n) = \zeta_C(2)^{-1}\cdot q^n + \textnormal{error}$, where the 
error is non-zero. It was worked out in great detail by Byunjchul Cha in 2011. 





\subsection{Configuration spaces of polynomials}

How do you tell whether an integer / polynomial is square-free? In $\dZ$, this 
is somewhat hard. For polynomials in $k[t]$, we compute the discriminant. For 
example, suppose $P(t) = t^3+a_1 t^2 + a_2 t + a_3$. The polynomial $P$ is 
square-free if and only if 
\[
  a_2^2 a_1^2 - 4 a_3 a_1^3 - 4 a_2^3 + 18 a_3 a_2 a_1 - 27 a_3^2 \ne 0 .
\]
In fact, this is $\Delta(P)=\prod_{i\ne j} (\theta_i-\theta_j)$, where the 
$\theta_i$ are the roots of $P$. Clearly $\Delta$ is a polynomial in the 
$\theta_i$ which is fixed under permutations of the $\theta_i$. Thus it follows 
abstractly that it is a polynomial in the $a_i$. The same argument works for 
polynomials of arbitrary degree. 

We can construct the \emph{moduli space of square-free polynomials}. This is 
the open subvariety of $\dA_{a_1,\dots,a_n}^n$ (the ``moduli space of monic 
degree-$n$ polynomials'') where $\Delta$ does not vanish. Denote this space 
by $\conf^n$. In general, $\conf^n(k)$ is the set of square-free monic 
polynomials of degree $n$ with coefficients in $k$. Note that 
$\squarefree_q(n) =\# \conf^n(\dF_q)$. We will think of $\conf^n$ as a scheme 
over $\spec(\dZ)$. 

Note that $\conf^n(\dC)$ is the set of \emph{unordered} $n$-tuples of 
\emph{distinct} complex numbers via the isomorphism 
\[
  P\mapsto \{\text{roots of }P\} .
\]
We could think of $\conf^n(\dC)$ as the ``configuration space of $n$ distinct 
points in $\dC$.'' The set $\conf^n(\dC)$ is a manifold, so we can investigate 
its topology. Note that $\conf^1(\dC)=\dC$. The space $\conf^2(\dC)$ of 
unordered pairs of distinct points can be understood as the quotient of the 
space of \emph{unordered} pairs of distinct points is homotopy-equivalent to 
$S^1$. Forgetting the ordering corresponds to quotienting out by the antipodal 
map, so $\conf^2(\dC)\approx S^1$. 

As $n$ grows, the spaces $\conf^n$ get more complicated, e.g.\ the fundamental 
group $\pi_1(\conf^n(\dC))$ can be described as follows. A loop in 
$\conf^n(\dC)$ is a way of ``moving around'' a collection of $n$ distinct 
points, ending up with the same configuration of $n$ points. These are exactly 
braids on $n$ points, and composition of loops corresponds to the standard 
composition of braids. Thus $\pi_1(\conf^n(\dC))\simeq \braid_n$, the Artin 
braid group on $n$ strands. 

\begin{theorem}[Arnol'd]
For all $n>1$, 
\begin{align*}
  \h^0(\conf^n(\dC),\dQ) &=\dQ \\
  \h^1(\conf^n(\dC),\dQ) &= \dQ \\
  \h^i(\conf^n(\dC),\dQ) &= 0 \qquad (i>1) .
\end{align*}
\end{theorem}
In other words, $\h^\bullet(\conf^n(\dC),\dQ) \simeq \h^\bullet(S^1,\dQ)$. If 
we allow integral coefficients, things become much more interesting. This 
theorem can be interpreted as a result in homological stability. The same 
phenomenon occurs for $\cM_g$, the moduli space of genus $g$ curves for 
$g\gg 0$. 





\subsection{\'Etale cohomology of configuration spaces}

We'll start with the Grothendieck-Lefschetz trace formula. It says that for any 
variety $X$ over $\dF_q$, we have 
\[
  \# X(\dF_q) = \sum_i (-1)^i \trace\left(\frob|\h_{\et,c}^i(X_{\bar\dF_q},\dQ_\ell)\right) .
\]
Here $\ell$ is any prime not dividing $q$. The vector space 
$\h_{\et,c}^i(X_{\bar\dF_q},\dQ_\ell)$ carries an action of the pro-cyclic 
group $\gal(\bar\dF_q/\dF_q) = \langle \frob\rangle$. 

When $X$ is a variety that ``makes sense'' over both $\dC$ and $\dF_q$ (e.g.\ 
a proper smooth variety over $\spec\dZ$), we may hope 
\[
  \dim_{\dQ_\ell} \h^i_\et(X_{\bar\dF_q},\dQ_\ell) = \dim_\dQ \h^i(X(\dC),\dQ) .
\]
Under ``good circumstances,'' this is the case. The configuration spaces 
$\conf^n$ fit into these circumstances, so we have (for all $n>2$) 
\begin{align*}
  \h_\et^0(\conf^n_{\bar\dF_q},\dQ_\ell) &= \dQ_\ell \\
  \h_\et^1(\conf^n_{\bar\dF_q},\dQ_\ell) &= \dQ_\ell \\
  \h_\et^i(\conf^n_{\bar\dF_q},\dQ_\ell) &= 0 \qquad (i>1)
\end{align*}
Moreover, Frobenius acts as $1$ on $\h_\et^00$, and as $q$ on $\h_\et^1$. 

Poincar\'e duality relates $\h_\et^i$ with $\h^{2n-i}_{\et,c}$. It follows 
that 
\begin{align*}
  \# \conf^n(\dF_q) &= q^n = \sum (-1)^i \trace(\frob\h^i_\et(\conf^n_{\bar\dF_q},\dQ_\ell)^\vee) \\
    &= q^n\left(\trace(\frob|{\h^0}^\vee) - \trace(\frob|{\h^1}^\vee)\right) \\
    &= q^n\left(1-\frac 1 q\right) \\
    &= q^n-q^{n-1} .
\end{align*}
So the reason for the lack of error term in our formula for $\conf_n(q)$ is the 
fact that $\conf^n$ satisfies an ``Arnol'd theorem.'' 

Recall that we were interested in counting square-free integers in 
$[N, 2 N]$, monic square-free polynomials of degree $n$ in $\dF_q[t]$, and 
computing the cohomology of the moduli space of degree-$n$ square-free 
polynomials in $\dC[t]$. 

We are in a position to clarify what is meant by geometric analytic number 
theory. Start with some problem over $\dZ$ (or over some number field). 
Consider the analogous problem over $\dF_q(t)$. Hope that this problem can be 
interpreted as the problem of studying $\# X_n(\dF_q)$ for some sequence 
$\{X_n\}$ of varieties. Finally, we formulate a geometric / topological 
assertion about $X_\bullet$ over $\dC$ which implies the above. 




\subsection{Chowla conjecture}

Let $\mu$ the M\"obius function defined by 
\[
  \mu(n) = \begin{cases} 0 & n\text{ not squarefree} \\ (-1)^k & n\text{ a product of $k$ distinct primes} \end{cases}
\]
We would expect this to be a random sign (from an additive point of view). For 
example, we would expect 
\[
  \sum_{i=N}^{2 N} \mu(n) = o(N) ,
\]
i.e.\ that $\lim_{N\to \infty} \frac{1}{N}\sum_{i=N}^{2 N} \mu(i) = 0$. The 
question of whether 
\[
  \frac 1 N \sum_N^{2 N} \mu(n) \mu(n+1) \to 0
\]
is wide open. 

\begin{conjecture}[Chowla]
\[
  \sum_{n=N}^{2 N} \mu(n+a_1)^{\varepsilon_1} \cdots \mu(n+a_1)^{\varepsilon_r} = o(N) .
\]
\end{conjecture}

The analogue of the Chowla conjecture over finite fields is also open. The 
slogan is: facts about arithmetic statistics in function fields in the ``large 
$q$ limit'' correspond to facts about irreducible components (i.e. $\h^0$) of 
moduli spaces. 

As a specific example, consider sums 
\[
  \sum_{\deg f=n} \mu(f)\mu(f+1) .
\]
Note that $\mu(f)=0$ if and only if $\Delta(f)=0$ if and only if $f$ is not 
square-free. In fact, $\mu(f) = (-1)^n \chi(\Delta(f))$, were 
$\chi:\dF_q^\times \to \dZ^\times$ is the unique non-trivial character. So 
\begin{align*}
  \mu(f) \mu(f+1) 
    &= \chi(\Delta(f))\chi(\Delta(f+1)) \\
    &= \chi(\Delta(f)\Delta(f+1)) \\
    &= \#\{\text{square roots of $\Delta(f)\Delta(f+1)$}\} - 1.
\end{align*}
So let $Y_n$ be the moduli space of pairs $(f,y)$, where $y$ is a square root 
of $\Delta(f)\Delta(f+1)$. In other words, $Y^n$ has equation 
$y^2=\Delta(f)\Delta(f+1)$. So $Y_n \to \dA^n$ is a double cover ramified at 
$V(\Delta(f)\Delta(f+1))$, the map being $(f,y)\mapsto f$. So 
\begin{align*}
  \sum_f \mu(f)\mu(f+1) 
    &= \sum_f \left(\#\{\text{square roots of $\Delta(f)\Delta(f+1)$}\} - 1\right) \\
    &= \# Y_n(\dF_q) - q^n .
\end{align*}
We hope that this is $o(q^n)$, i.e. we want 
$\# Y_n(\dF_q) = q^n + o(q^n)$. 

\begin{conjecture}[geometric Chowla]
For all $n\geq 0$, the variety $Y_n$ is irreducible, and there is a constant 
$\alpha>0$ such that $\h_{\et,c}^{2n-i}(Y_n,\dQ_\ell) = 0$ for all 
$i<\alpha n$. 
\end{conjecture}

Instead of asking about $\lim_{n\to \infty} q^{-n} \# Y_n(\dF_q)$, what about 
$\lim_{q\to \infty} q^{-n} \# Y_n(\dF_q)$? Or what about 
\[
  \lim_{n\to \infty} \lim_{q\to \infty} q^{-n} \# Y_n(\dF_q) .
\]

\begin{theorem}[Cerman-Rudnick]
Let $\dF_q$ have odd characteristic, and let $a_1,\dots,a_m$ be distinct 
polynomials in $\dF_q[t]$. Then 
\[
  \sum_{\deg f=n} \mu(f+a_1)^{\varepsilon_1} \cdots \mu(f+a_m)^{\varepsilon_m} \leq 2 m n q^{n-1/2} + 3 m n^2 q^{n-1} .
\]
if not all the $\varepsilon_i$ are even 
\end{theorem}
Note that the upper bound is $o(q^n)$ as $q\to \infty$ with $n$ fixed. The main 
idea is that 
\[
  \# Y_n(\dF_q) = \sum (-1)^i \trace( \frob,\h_{\et,c}^{2n-i}(Y_n,\dQ_\ell)) .
\]
The Weil bounds (a theorem of Deligne) give upper bounds for the eigenvalues 
of Frobenius acting on $\h_{\et,c}^{2n-i}(Y_n,\dQ_\ell)$. These eigenvalues 
have absolute value at most $q^{n-i/2}$. The sum of all Betti numbers can 
be bounded independently of $q$ by some $B$. So the contribution of 
$\h^{2n-i}$ for all $i>0$ is at most $B q^{n-1/2}$, while 
$\h^{2n}(Y_n,\dQ_\ell)$ contributes something a bit more complicated. 
The space $\h^{2n}_{\et,c}(Y_n,\dQ_\ell)$ is spanned by irreducible 
components of $Y_n$. Frobenius acts by $q^n$ times a permutation action on 
components. 

So $\trace(\frob,\h^{2n}) = \#\{\dF_q\text{-rational irreducible components}\}$. 
So one needs to show that $Y_n$ is geometrically irreducible. This is true 
unless $\Delta(f)\Delta(f+1)$ is a perfect square (as a polynomial). It's not, 
and this is the geometric heart of the argument. 

One way to think of this: the \'etale double cover of 
$\dA^n\minus V(\Delta(f)\Delta(f+1))$ given by adjoining 
$\sqrt{\Delta(f)\Delta(f+1)}$. This is given by a map 
\[
  \gal(k(a_1,\dots,a_n)) \to \dZ/2 .
\]
We are interested in the image of this Galois representation. We need to know 
that it is surjective (i.e. that we have \emph{big monodromy}). 





\subsection{Geometric analytic number theory that will not appear}

We could look at the question of geometric twin primes / prime clusters. The 
variety involved would be the moduli space of \emph{factored} $f$ and factored 
$g$ such that $g=f+1$. In other words, we would look at the moduli space of 
tuples $(z_1,\dots,z_n,w_1,\dots,w_n)$ such that 
$(x-z_1)\dotsm (x-z_n) + 1 = (x-w_1)\dotsm (x-w_n)$. This variety admits an 
action of $S_n\times S_n$, and we would want to understand the cohomology of 
the variety together with its $S_n\times S_n$-action. Pollack and Barry-Soroker 
have proved ``large $q$-limit'' versions of these theorems. 

There is also a geometric Limik / Malle / Bhargava conjecture. The relevant 
moduli spaces are $X_n$ being the moduli space of degree-$d$ covers (or 
$G$-covers) of $\dP^1$ with $n$ branch points (Hurwitz spaces). 

There is a geometric Poonen-Rains conjecture, involving a moduli space of 
elliptic surfaces together with elements of $\h^2(E,\dZ/p)$. 

There is a geometric Limik-Duke, on equidistribution of Heegner points. A 
recent paper of Shende and Tsimerman does this for ``generalized theta divisors 
inside abelian varieties.'' 

Finally, there is a geometric Batyrev-Manin. The relevant moduli space has 
$X(\dF_q(t))$ classifying maps from $\dP^1\to X$, and $X_n$ classifying 
degree-$n$ maps from $\dP^1$ to $X$. 





\subsection{Geometric Cohen-Lenstra}

\begin{conjecture}[Cohen, Lenstra]
Let $\ell$ be an odd prime, and $E_{r,\ell,N}$ be the expected value, as $d$ 
ranges over square-free integers in $[N, 2 N]$, of 
\[
  \operatorname{Surj}(\class(\dQ(\sqrt{-d})),(\dZ/\ell)^r)
\]
Then 
\[
  \lim_{N\to \infty} E_{N,\ell,r} = 1 .
\]
\end{conjecture}

For example, $E_{N,\ell,1}$ is the expected value of $\# \class[\ell]-1$. 

The function field Cohen-Lenstra works as follows. Start with the following 
analogy:
\begin{center}
\begin{tabular}{c|c}
number field & function field \\ \hline
$\dQ(\sqrt{-d})$ & $C_f:y^2=f(x)$ \\
$\cO\subset \dQ(\sqrt{-d})$ & $U=C_f-\infty_f$ \\
ideal of $\cO$ & effective divisor on $U$ \\
class group of $\cO$ & $\picard(U) = \jacobian(C_f)(\dF_q)$ \\
$\class(\cO)[\ell]$ & $\jacobian(C_f)[\ell](\dF_q)$
\end{tabular}
\end{center}
This suggests a definition: $\conf^n(\ell)$ is the moduli space of 
hyperelliptic curves with $\ell$-level structure, i.e. pairs 
$(f,P)$, where $f$ is squarefree monic of degree $n$ and 
$P\in \jacobian(C_f)[\ell]$ nonzero. The space $\conf^n(\ell)$ is a cover of 
$\conf^n$ via $(f,P)\mapsto f$. It is in fact a finite \'etale map of degree 
$\ell^{2 g}-1$. Let $E_{q,\ell,r,n}$ be 
\[
  \dE_f\left(\operatorname{Surj}(\jacobian(C_f)(\dF_q),(\dZ/\ell)^r)\right) \qquad(\text{``expected value''}).
\]
For example, $E_{q,\ell,q,n}$ is the average of 
$\#\jacobian(C_f)(\dF_q)[\ell]-1$. This is the average of 
\[
  \#\pi^{-1}(f)(\dF_q) = \frac{\#\conf^n(\ell)(\dF_q)}{\#\conf^n(\dF_q)} ,
\]
where $\pi:\conf^n(\ell) \to \conf^n$ is the canonical cover. So Cohen-Lenstra 
predicts that 
\[
  \lim_{n\to \infty} \frac{\#\conf^n(\ell)(\dF_q)}{\conf^n(\dF_q)} = 1 .
\]
A ``large $q$-limit'' version of this has already been done. It works only if  
$\conf^n(\ell)$ is geometrically irreducible (i.e.\ connected). Think of 
$\conf^n(\ell)\xrightarrow\pi\conf^n$ as the action of 
$\pi_1(\conf^n)=\braid_n$ on $\pi^{-1}(f) =(\dZ/\ell)^{2 g}$. After 
choosing bases, this is just a representation 
$\braid_n \to \symplectic_{2 g}(\dF_\ell)$.  Saying that $\conf^n(\ell)$ is 
connected is identical to saying that $\braid_n$ acts transitively on 
$(\dZ/\ell)^{2 g}\minus 0$. This is true, because we know that 
$\braid_n\to \symplectic_{2 g}(\dF_\ell)$ is surjective! This is a theorem of 
A'Cumpo, Yu, Achter-Pries, and Hall. In fact, the big monodromy result gives 
\[
  \lim_{q\to \infty} \text{average } \operatorname{Surj}(\jacobian(C_f),(\dZ/\ell)^r) = 1 .
\]
for all $r$. This amounts to studying the action of $\symplectic_{2g}(\dF_\ell)$ 
on surjections from $(\dZ/\ell)^{2 g}$ to $(\dZ/\ell)^r$. Dually, we could look 
at the action on $\operatorname{Inj}((\dZ/\ell)^r,(\dZ/\ell)^{2 g})$. But this 
action is \emph{not} transitive. In other words, given an action 
$Q:(\dZ/\ell)^r \to (\dZ/\ell)^{2 g}$, $Q^\ast\omega$ could be\ldots. What's 
going on is not $\symplectic_{2g}(\dF_\ell)$, but a coset 
$\symplectic_{2 g}^{(q)}(\dF_\ell)\subset \generalsymplectic_{2 g}(\dF_\ell)$. 

It turns out that the action of Frobenius on these components to multiply 
$Q^\ast \omega$ by $q$. The only fixed ones are those with $Q^\ast\omega=0$, i.e. 
the orbit of isotropic subspaces of $(\dZ/\ell)^{2 g}$. The symplectic group 
$\symplectic_{2 g}(\dF_\ell)$ \emph{does} act transitively on those isotropic 
subspaces. 




